{"ast":null,"code":"var _jsxFileName = \"/Users/fumina/Documents/project/practice/react-udemy__02/redux-refresshers/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, Fragment } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui\";\nimport Notification from \"./components/UI/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet isInitial = true;\n\nfunction App() {\n  _s();\n\n  const dispatch = useDispatch();\n  const isOpenCart = useSelector(state => state.ui.isOpenCart);\n  const cart = useSelector(state => state.cart);\n  const notification = useSelector(state => state.ui.notification); //every time app component render, the initial value will store the database, that would be problem because empty data will update all exsiting data every single time when app component render, so we need fix it\n\n  useEffect(() => {\n    const sendCartData = async () => {\n      dispatch(uiActions.showNotification({\n        status: \"pending\",\n        title: \"Sending...\",\n        message: \"Sending cart data\"\n      })); // const response = await fetch(\n      //   \"https://react-http-3be24-default-rtdb.firebaseio.com/cart.json\",\n      //   {\n      //     method: \"PUT\",\n      //     body: JSON.stringify(cart),\n      //   }\n      // );\n      // if (!response.ok) {\n      //   throw new Error(\"Sending cart data failed.\");\n      // }\n\n      dispatch(uiActions.showNotification({\n        status: \"success\",\n        title: \"Success!\",\n        message: \"Sending cart data successfully!\"\n      }));\n    };\n\n    if (isInitial) {\n      isInitial = false;\n      return;\n    }\n\n    sendCartData().catch(error => {\n      dispatch(uiActions.showNotification({\n        status: \"error\",\n        title: \"Error!\",\n        message: \"Sending cart data failed!\"\n      }));\n    });\n  }, [cart, dispatch]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [notification && /*#__PURE__*/_jsxDEV(Notification, {\n      status: notification.status,\n      title: notification.title,\n      message: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: [isOpenCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"cj1aieFgzNlAbkAziZaQTFLCnFU=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/fumina/Documents/project/practice/react-udemy__02/redux-refresshers/src/App.js"],"names":["useEffect","Fragment","useSelector","useDispatch","Cart","Layout","Products","uiActions","Notification","isInitial","App","dispatch","isOpenCart","state","ui","cart","notification","sendCartData","showNotification","status","title","message","catch","error"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAOC,YAAP,MAAyB,8BAAzB;;AAEA,IAAIC,SAAS,GAAG,IAAhB;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,UAAU,GAAGV,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACC,EAAN,CAASF,UAArB,CAA9B;AACA,QAAMG,IAAI,GAAGb,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACE,IAAlB,CAAxB;AACA,QAAMC,YAAY,GAAGd,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACC,EAAN,CAASE,YAArB,CAAhC,CAJa,CAKb;;AACAhB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMiB,YAAY,GAAG,YAAY;AAC/BN,MAAAA,QAAQ,CACNJ,SAAS,CAACW,gBAAV,CAA2B;AACzBC,QAAAA,MAAM,EAAE,SADiB;AAEzBC,QAAAA,KAAK,EAAE,YAFkB;AAGzBC,QAAAA,OAAO,EAAE;AAHgB,OAA3B,CADM,CAAR,CAD+B,CAQ/B;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEAV,MAAAA,QAAQ,CACNJ,SAAS,CAACW,gBAAV,CAA2B;AACzBC,QAAAA,MAAM,EAAE,SADiB;AAEzBC,QAAAA,KAAK,EAAE,UAFkB;AAGzBC,QAAAA,OAAO,EAAE;AAHgB,OAA3B,CADM,CAAR;AAOD,KA3BD;;AA6BA,QAAIZ,SAAJ,EAAe;AACbA,MAAAA,SAAS,GAAG,KAAZ;AACA;AACD;;AAEDQ,IAAAA,YAAY,GAAGK,KAAf,CAAsBC,KAAD,IAAW;AAC9BZ,MAAAA,QAAQ,CACNJ,SAAS,CAACW,gBAAV,CAA2B;AACzBC,QAAAA,MAAM,EAAE,OADiB;AAEzBC,QAAAA,KAAK,EAAE,QAFkB;AAGzBC,QAAAA,OAAO,EAAE;AAHgB,OAA3B,CADM,CAAR;AAOD,KARD;AASD,GA5CQ,EA4CN,CAACN,IAAD,EAAOJ,QAAP,CA5CM,CAAT;AA8CA,sBACE,QAAC,QAAD;AAAA,eACGK,YAAY,iBACX,QAAC,YAAD;AACE,MAAA,MAAM,EAAEA,YAAY,CAACG,MADvB;AAEE,MAAA,KAAK,EAAEH,YAAY,CAACI,KAFtB;AAGE,MAAA,OAAO,EAAEJ,YAAY,CAACK;AAHxB;AAAA;AAAA;AAAA;AAAA,YAFJ,eAQE,QAAC,MAAD;AAAA,iBACGT,UAAU,iBAAI,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,cADjB,eAEE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YARF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAeD;;GAnEQF,G;UACUP,W,EACED,W,EACNA,W,EACQA,W;;;KAJdQ,G;AAqET,eAAeA,GAAf","sourcesContent":["import { useEffect, Fragment } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui\";\nimport Notification from \"./components/UI/Notification\";\n\nlet isInitial = true;\n\nfunction App() {\n  const dispatch = useDispatch();\n  const isOpenCart = useSelector((state) => state.ui.isOpenCart);\n  const cart = useSelector((state) => state.cart);\n  const notification = useSelector((state) => state.ui.notification);\n  //every time app component render, the initial value will store the database, that would be problem because empty data will update all exsiting data every single time when app component render, so we need fix it\n  useEffect(() => {\n    const sendCartData = async () => {\n      dispatch(\n        uiActions.showNotification({\n          status: \"pending\",\n          title: \"Sending...\",\n          message: \"Sending cart data\",\n        })\n      );\n      // const response = await fetch(\n      //   \"https://react-http-3be24-default-rtdb.firebaseio.com/cart.json\",\n      //   {\n      //     method: \"PUT\",\n      //     body: JSON.stringify(cart),\n      //   }\n      // );\n\n      // if (!response.ok) {\n      //   throw new Error(\"Sending cart data failed.\");\n      // }\n\n      dispatch(\n        uiActions.showNotification({\n          status: \"success\",\n          title: \"Success!\",\n          message: \"Sending cart data successfully!\",\n        })\n      );\n    };\n\n    if (isInitial) {\n      isInitial = false;\n      return;\n    }\n\n    sendCartData().catch((error) => {\n      dispatch(\n        uiActions.showNotification({\n          status: \"error\",\n          title: \"Error!\",\n          message: \"Sending cart data failed!\",\n        })\n      );\n    });\n  }, [cart, dispatch]);\n\n  return (\n    <Fragment>\n      {notification && (\n        <Notification\n          status={notification.status}\n          title={notification.title}\n          message={notification.message}\n        />\n      )}\n      <Layout>\n        {isOpenCart && <Cart />}\n        <Products />\n      </Layout>\n    </Fragment>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}