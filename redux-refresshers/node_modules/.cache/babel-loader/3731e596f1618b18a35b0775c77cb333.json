{"ast":null,"code":"var _jsxFileName = \"/Users/fumina/Documents/project/practice/react-udemy__02/redux-refresshers/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const dispatch = useDispatch();\n  const isOpenCart = useSelector(state => state.ui.isOpenCart);\n  const cart = useSelector(state => state.cart); //every time app component render, the initial value will store the database, that would be problem because empty data will update all exsiting data every single time when app component render, so we need fix it\n\n  useEffect(() => {\n    const sendCartData = async () => {\n      dispatch(uiActions.showNotificartion({\n        status: \"pending\",\n        title: \"Sending...\",\n        message: \"Sending cart data\"\n      }));\n      const response = await fetch(\"https://react-http-3be24-default-rtdb.firebaseio.com/cart.json\", {\n        method: \"PUT\",\n        body: JSON.stringify(cart)\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Sending cart data failed.\");\n      }\n\n      dispatch(uiActions.showNotificartion({\n        status: \"success\",\n        title: \"Success!\",\n        message: \"Sending cart data successfully!\"\n      }));\n    };\n\n    sendCartData().catch(error => {\n      dispatch(uiActions.showNotificartion({\n        status: \"\",\n        title: \"Sending...\",\n        message: \"Sending cart data\"\n      }));\n    });\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [isOpenCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"FECH6lcR0jzqlU50nZ2DcTPXqdk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/fumina/Documents/project/practice/react-udemy__02/redux-refresshers/src/App.js"],"names":["useEffect","useSelector","useDispatch","Cart","Layout","Products","uiActions","App","dispatch","isOpenCart","state","ui","cart","sendCartData","showNotificartion","status","title","message","response","fetch","method","body","JSON","stringify","ok","Error","catch","error"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,SAAT,QAA0B,YAA1B;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAMO,UAAU,GAAGR,WAAW,CAAES,KAAD,IAAWA,KAAK,CAACC,EAAN,CAASF,UAArB,CAA9B;AACA,QAAMG,IAAI,GAAGX,WAAW,CAAES,KAAD,IAAWA,KAAK,CAACE,IAAlB,CAAxB,CAHa,CAKb;;AACAZ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,YAAY,GAAG,YAAY;AAC/BL,MAAAA,QAAQ,CACNF,SAAS,CAACQ,iBAAV,CAA4B;AAC1BC,QAAAA,MAAM,EAAE,SADkB;AAE1BC,QAAAA,KAAK,EAAE,YAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA5B,CADM,CAAR;AAOA,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,gEAD0B,EAE1B;AACEC,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,IAAf;AAFR,OAF0B,CAA5B;;AAQA,UAAI,CAACM,QAAQ,CAACM,EAAd,EAAkB;AAChB,cAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;AACD;;AAEDjB,MAAAA,QAAQ,CACNF,SAAS,CAACQ,iBAAV,CAA4B;AAC1BC,QAAAA,MAAM,EAAE,SADkB;AAE1BC,QAAAA,KAAK,EAAE,UAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA5B,CADM,CAAR;AAOD,KA3BD;;AA6BAJ,IAAAA,YAAY,GAAGa,KAAf,CAAsBC,KAAD,IAAW;AAC9BnB,MAAAA,QAAQ,CACNF,SAAS,CAACQ,iBAAV,CAA4B;AAC1BC,QAAAA,MAAM,EAAE,EADkB;AAE1BC,QAAAA,KAAK,EAAE,YAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA5B,CADM,CAAR;AAOD,KARD;AASD,GAvCQ,EAuCN,CAACL,IAAD,CAvCM,CAAT;AAyCA,sBACE,QAAC,MAAD;AAAA,eACGH,UAAU,iBAAI,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,YADjB,eAEE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;GArDQF,G;UACUL,W,EACED,W,EACNA,W;;;KAHNM,G;AAuDT,eAAeA,GAAf","sourcesContent":["import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const isOpenCart = useSelector((state) => state.ui.isOpenCart);\n  const cart = useSelector((state) => state.cart);\n\n  //every time app component render, the initial value will store the database, that would be problem because empty data will update all exsiting data every single time when app component render, so we need fix it\n  useEffect(() => {\n    const sendCartData = async () => {\n      dispatch(\n        uiActions.showNotificartion({\n          status: \"pending\",\n          title: \"Sending...\",\n          message: \"Sending cart data\",\n        })\n      );\n      const response = await fetch(\n        \"https://react-http-3be24-default-rtdb.firebaseio.com/cart.json\",\n        {\n          method: \"PUT\",\n          body: JSON.stringify(cart),\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Sending cart data failed.\");\n      }\n\n      dispatch(\n        uiActions.showNotificartion({\n          status: \"success\",\n          title: \"Success!\",\n          message: \"Sending cart data successfully!\",\n        })\n      );\n    };\n\n    sendCartData().catch((error) => {\n      dispatch(\n        uiActions.showNotificartion({\n          status: \"\",\n          title: \"Sending...\",\n          message: \"Sending cart data\",\n        })\n      );\n    });\n  }, [cart]);\n\n  return (\n    <Layout>\n      {isOpenCart && <Cart />}\n      <Products />\n    </Layout>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}